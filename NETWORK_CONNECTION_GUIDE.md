# Seeed RoboCore Studio - 局域网连接使用指南

## 🌐 新功能介绍

为支持黑客松和团队协作场景，我们新增了 **WebSocket服务器配置功能**，允许多个用户在局域网内同时连接同一个舵机控制系统。

## ✨ 核心特性

### 🌍 局域网支持
- **多设备连接**: 局域网内所有设备可同时访问
- **灵活配置**: 支持自定义服务器IP和端口
- **自动检测**: 自动发现本地网络IP地址
- **连接测试**: 实时测试服务器连接状态

### 💾 配置管理
- **持久化存储**: 服务器配置自动保存
- **快速切换**: 预设本地服务器、自动检测、所有接口
- **连接状态**: 实时显示连接状态和服务器信息

## 🚀 快速开始

### 1. 启动服务器 (主机)

```bash
# 默认启动 - 支持局域网连接
python server.py

# 或指定参数
python server.py --port COM8 --ws-port 8765 --host 0.0.0.0
```

启动后服务器会显示：
```
WebSocket服务器已启动: ws://localhost:8765
局域网访问: ws://192.168.1.100:8765
所有网络接口已启用，支持局域网连接

局域网访问说明:
  1. 确保防火墙允许端口 8765
  2. 其他设备通过 ws://192.168.1.100:8765 访问
  3. 或在网页中配置服务器地址为: 192.168.1.100
```

### 2. 配置客户端

**主机 (localhost访问)**:
- 打开 `seeed_robocore_studio.html`
- 默认连接 `127.0.0.1:8765`

**其他设备 (局域网访问)**:
1. 打开 `seeed_robocore_studio.html`
2. 点击连接状态旁边的 ⚙️ 按钮
3. 在服务器地址中输入主机IP (例如: `192.168.1.100`)
4. 端口保持 `8765`
5. 点击"连接服务器"

### 3. 连接配置界面

#### 配置选项
- **服务器地址**: 输入WebSocket服务器的IP地址
- **端口**: WebSocket服务端口 (默认: 8765)

#### 快速选择按钮
- **本地服务器**: `127.0.0.1:8765` (默认)
- **自动检测**: 自动发现本地网络IP
- **所有接口**: `0.0.0.0:8765` (调试用)

#### 连接操作
- **测试连接**: 验证服务器是否可达
- **连接服务器**: 连接到配置的服务器地址

## 🎯 使用场景

### 黑客松场景
1. **一人连接硬件**: 主机通过串口连接舵机
2. **多人协作**: 团队成员通过局域网访问控制界面
3. **实时共享**: 所有人看到相同的设备状态和操作结果

### 教学演示
1. **教师控制**: 教师的主机连接硬件设备
2. **学生观摩**: 学生通过局域网观察和控制
3. **互动操作**: 多人轮流操作同一设备

### 开发调试
1. **硬件分离**: 硬件连接和开发可以在不同设备
2. **远程调试**: 远程访问和控制硬件设备
3. **多端测试**: 同时测试多个客户端的兼容性

## 🔧 网络配置

### 防火墙设置
确保允许WebSocket端口 (默认8765) 的连接：

**Windows**:
```
控制面板 → Windows防火墙 → 高级设置 → 入站规则
新建规则 → 端口 → TCP → 8765
```

**macOS**:
```
系统偏好设置 → 安全性与隐私 → 防火墙 → 防火墙选项
允许Python或相关应用程序
```

**Linux**:
```bash
sudo ufw allow 8765/tcp
# 或
sudo iptables -A INPUT -p tcp --dport 8765 -j ACCEPT
```

### 网络要求
- **同一局域网**: 所有设备需要在同一个WiFi或网络下
- **IP可达**: 客户端能够ping通服务器IP
- **端口开放**: WebSocket端口未被防火墙阻止

## 📱 移动设备访问

### 手机/平板访问
1. 确保移动设备与服务器在同一WiFi网络
2. 在浏览器中打开HTML文件
3. 配置服务器地址为主机的局域网IP
4. 享受移动端控制体验

### 浏览器兼容性
- ✅ Chrome (推荐)
- ✅ Firefox
- ✅ Safari
- ✅ Edge
- ❌ IE (不支持WebSocket)

## 🔍 故障排除

### 连接失败
1. **检查IP地址**: 确认服务器IP是否正确
2. **检查端口**: 确认WebSocket端口是否开放
3. **检查网络**: 确认设备在同一局域网
4. **防火墙**: 检查是否阻止了连接

### 自动检测失败
- 手动输入IP地址
- 使用 `ipconfig` (Windows) 或 `ifconfig` (Linux/macOS) 查看IP

### 连接不稳定
- 检查网络信号强度
- 确认服务器运行正常
- 重启服务器和客户端

## 💡 最佳实践

### 服务器配置
```bash
# 推荐的生产环境启动命令
python server.py --port COM8 --ws-port 8765 --host 0.0.0.0
```

### 客户端使用
1. **首次连接**: 先测试连接，再正式连接
2. **配置保存**: 服务器配置会自动保存，下次自动连接
3. **连接状态**: 观察右上角连接指示器
4. **日志监控**: 通过系统日志了解连接状态

### 团队协作
- **IP获取**: 主机用户获取并分享自己的IP地址
- **权限管理**: 避免多人同时操作造成冲突
- **操作协调**: 建立操作顺序和沟通机制

## 🎉 总结

通过WebSocket服务器配置功能，Seeed RoboCore Studio现在支持：

- ✅ **局域网多设备连接**
- ✅ **灵活的服务器配置**
- ✅ **自动IP检测**
- ✅ **连接状态监控**
- ✅ **配置持久化存储**
- ✅ **实时连接测试**

这为黑客松、教学演示、团队开发等场景提供了完美的网络协作解决方案！

---

**快速入门**: 一个人连接硬件，整个团队通过网络协作控制！🌐